## JavaScript 객체와 불변성이란 ?

### 1. 기본형 데이터와 참조형 데이터

Immutability(변경불가성)는 객체가 생성된 이후 그 상태를 변경할 수 없는 디자인 패턴을 의미한다.
Immutability은 함수형 프로그래밍의 핵심 원리이다.
**불변 객체를 사용하면 복제나 비교를 위한 조작을 단순화 할 수 있고 성능 개선에도 도움이 된다.**


불변한 값 vs 변경 가능한 값
아래 Javascript의 원시 타입(기본형)(primitive data type)은 변경 불가능한 값(immutable value)이다.
- Boolean
- null
- undefined
- Number
- String
- Symbol (New in ECMAScript 6)
**원시 타입 이외의 모든 값은 객체(Object) 타입이며 객체 타입 은 변경 가능한 값(mutable value)이다.**
객체 타입 하위 : 배열(Array), 함수(Function), 정규표현식(RegExp)
   +  ES6에서는 Map, Set, WeakMap, WeakSet 등도 추가됨

 즉, 객체는 새로운 값을 다시 만들 필요없이 직접 변경이 가능하다는 것이다.
JavaScript의 데이터타입 중 원시 타입은 값이 변하지 않는 불변 값이고,기본형에 바로 값을 할당하는 것
참조형(값이 저장된 주소 값을 할당(참조)한다.
**객체는 값이 바뀔 수 있는 변경 가능한 값이다.**
객체의 이러한 특성 때문에 하나의 값에 두 개의 객체명 (A, B)이 생겼을 경우, A 객체의 값을 변경했을 때 의도치 않게 B 객체의 값도 같이 변경되어 난감해질 수 있다.
이를 방지하기 위한 방법으로 .assign()를 사용하는 것이 있는데, 이 때 주의할 것은 얕은 복사는 원본 메모리까지 복사하지 못하기 때문에 같은 문제가 발생할 우려가 있고, 예제 2번처럼 깊은 복사를 해야한다. 그리고 값을 변경할 일이 없는 객체에 .freeze()를 사용해서 불변 객체로 만들어주면 해결된다.

### 3. 불변 객체를 만드는 법
자바스크립트에서 기본적으로 제공하는 메소드인 Object.freeze() 메소드이다. 공식 문서에서는 "객체를 동결하기 위한 메소드" 라고 적혀있다.
그렇다면 이 메소드를 사용하면 불변 객체를 만들 수 있을까?먼저 이 메소드의 사용법부터 알아보면,
```
let test = {
    name : 'kim'
}
 
Object.freeze(test);
```
사용법은 간단하다. test 변수에 key value를 가진 객체를 바인딩 후 Object.freeze(test)를 사용해 바인딩된 변수를 동결 객체로 만들었다. 때문에 test 객체는 객체의 속성을 변경하는 시도는 불가능하다.
```
test.name = 'Jung';
console.log(test) // {name: 'kim'}
```
위와 같이 객체의 속성을 변경하는 시도는 무시된다.
그러나 Object.freeze()는 동결된 객체를 반환하지만 객체의 재할당은 가능하다. 
```
test = {
    age : 15
};
console.log(test); // {age: 15}
```
위와 같이 객체의 재할당은 가능하다. 때문에 Object.freeze()도 불변 객체라고 할 수는 없을 것 같다.
그럼 결국 불변 객체는 어떻게 만들 수 있냐면..
const와 Object.freeze()를 조합하여 만들 수 있다. (const의 재할당불가 + Object.freeze()의 객체속성 변경불가)
그렇다면 아래 코드와 같이 사용하면 된다.
```
const test = {
    'name' : 'jung'
};
 
Object.freeze(test);
```
먼저 const키워드로 바인딩 된 변수를 상수화 시킨 다음, Object.freeze()로 해당 변수를 동결 객체를 만들면
객체의 재할당과 객체의 속성 둘 다 변경불가능한 불변 객체가 된다.

### 4. 얕은 복사와 깊은 복사
객체는 참조 값을 복사하기 때문에 let obj2 = obj1와 같이 객체를 복사할 경우 얕은 복사가 일어난다.
얕은 복사(shallow copy)는 원본 객체는 하나인 상태에서, 참조 값만 복사한다. 객체를 복사한다. 
깊은 복사(deep copy)는 원시 값처럼 완전한 복사본을 만든다. 깊은 복사는 lodash의 cloneDeep을 사용해 수행 가능하다.

 
